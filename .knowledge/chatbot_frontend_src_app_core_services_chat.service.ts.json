{"is_source_file": true, "format": "TypeScript", "description": "This file defines an Angular service named ChatService that manages chat communication with a backend API, handling message streaming, sending, receiving, and error processing.", "external_files": ["./api.service", "../models/product.model"], "external_methods": ["inject", "BehaviorSubject", "cryptoId"], "published": ["ChatService"], "classes": [{"name": "ChatService", "description": "Angular service managing chat message flow, API interactions, and state reset for a chatbot application."}], "methods": [{"name": "send", "description": "Sends a message to the backend via the API and updates the chat messages, handling responses and errors."}, {"name": "reset", "description": "Resets the chat conversation state, clearing conversation ID and message list."}, {"name": "function cryptoId() { cryptoId", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function toUserMessage(err: unknown): string { toUserMessage", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["this.api.chat", "this.messagesSubject.next", "this.messagesSubject.asObservable", "cryptoId", "toUserMessage"], "search-terms": ["Angular ChatService", "rxjs BehaviorSubject", "chat API integration", "send message", "reset conversation", "error handling", "chat message stream"], "state": 2, "file_id": 27, "knowledge_revision": 123, "git_revision": "467f60171e5798f2ab94ba65bfcf78dd3b95cdc2", "revision_history": [{"55": ""}, {"118": ""}, {"123": "467f60171e5798f2ab94ba65bfcf78dd3b95cdc2"}], "ctags": [{"_type": "tag", "name": "ChatService", "path": "/home/kavia/workspace/code-generation/ecommerce-chatbot-platform-3036-3045/chatbot_frontend/src/app/core/services/chat.service.ts", "pattern": "/^export class ChatService {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "anyErr", "path": "/home/kavia/workspace/code-generation/ecommerce-chatbot-platform-3036-3045/chatbot_frontend/src/app/core/services/chat.service.ts", "pattern": "/^    const anyErr = err as any;$/", "language": "TypeScript", "kind": "constant", "scope": "toUserMessage", "scopeKind": "function"}, {"_type": "tag", "name": "api", "path": "/home/kavia/workspace/code-generation/ecommerce-chatbot-platform-3036-3045/chatbot_frontend/src/app/core/services/chat.service.ts", "pattern": "/^  private api = inject(ApiService);$/", "language": "TypeScript", "kind": "property", "scope": "ChatService", "scopeKind": "class"}, {"_type": "tag", "name": "conversationId", "path": "/home/kavia/workspace/code-generation/ecommerce-chatbot-platform-3036-3045/chatbot_frontend/src/app/core/services/chat.service.ts", "pattern": "/^      conversationId: this.conversationId,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "cryptoId", "path": "/home/kavia/workspace/code-generation/ecommerce-chatbot-platform-3036-3045/chatbot_frontend/src/app/core/services/chat.service.ts", "pattern": "/^function cryptoId() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "errMsg", "path": "/home/kavia/workspace/code-generation/ecommerce-chatbot-platform-3036-3045/chatbot_frontend/src/app/core/services/chat.service.ts", "pattern": "/^        const errMsg: ChatMessage = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "isNetworkError", "path": "/home/kavia/workspace/code-generation/ecommerce-chatbot-platform-3036-3045/chatbot_frontend/src/app/core/services/chat.service.ts", "pattern": "/^  const isNetworkError = typeof window !== 'undefined' && typeof navigator !== 'undefined' && !n/", "language": "TypeScript", "kind": "constant", "scope": "toUserMessage", "scopeKind": "function"}, {"_type": "tag", "name": "merged", "path": "/home/kavia/workspace/code-generation/ecommerce-chatbot-platform-3036-3045/chatbot_frontend/src/app/core/services/chat.service.ts", "pattern": "/^        const merged = [...this.messagesSubject.value, ...resp.messages];$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "req", "path": "/home/kavia/workspace/code-generation/ecommerce-chatbot-platform-3036-3045/chatbot_frontend/src/app/core/services/chat.service.ts", "pattern": "/^    const req: ChatRequest = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/ecommerce-chatbot-platform-3036-3045/chatbot_frontend/src/app/core/services/chat.service.ts", "pattern": "/^    const status = anyErr?.status as number | undefined;$/", "language": "TypeScript", "kind": "constant", "scope": "toUserMessage", "scopeKind": "function"}, {"_type": "tag", "name": "toUserMessage", "path": "/home/kavia/workspace/code-generation/ecommerce-chatbot-platform-3036-3045/chatbot_frontend/src/app/core/services/chat.service.ts", "pattern": "/^function toUserMessage(err: unknown): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "userFriendly", "path": "/home/kavia/workspace/code-generation/ecommerce-chatbot-platform-3036-3045/chatbot_frontend/src/app/core/services/chat.service.ts", "pattern": "/^        const userFriendly = toUserMessage(err);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "userMsg", "path": "/home/kavia/workspace/code-generation/ecommerce-chatbot-platform-3036-3045/chatbot_frontend/src/app/core/services/chat.service.ts", "pattern": "/^    const userMsg: ChatMessage = {$/", "language": "TypeScript", "kind": "constant"}], "hash": "9a885e4aa1f4d9a45d0e74b8a0e44740", "format-version": 4, "code-base-name": "chatbot_frontend", "filename": "chatbot_frontend/src/app/core/services/chat.service.ts", "fields": [{"name": "private api = inject(ApiService);", "scope": "ChatService", "scopeKind": "class", "description": "unavailable"}]}